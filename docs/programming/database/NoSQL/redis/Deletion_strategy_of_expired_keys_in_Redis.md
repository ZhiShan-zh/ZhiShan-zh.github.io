# Redis中过期键的删除策略

如果Redis的一个键是过期了，可以采用三种策略将其删除。

# 1 立即删除

## 1.1 概述

立即删除：指在设置键的过期时间时，创建一个回调事件，当过期时间达到时，由时间处理器自动执行键的删除操作。

## 1.2 优点

立即删除能保证内存中数据的最大新鲜度，因为它保证过期键值会在过期后马上被删除，其所占用的内存也会随之释放。

## 1.3 缺点

立即删除会对CPU造成额外的压力

- 删除操作会占用cpu的时间，如果刚好碰上了cpu正在做排序等计算的时候，就会给cpu造成额外的压力。

- 目前redis事件处理器对时间事件的处理采用无序链表方式，查找一个key的时间复杂度为O(n)，所以并不适合用来处理大量的时间事件。

# 2 惰性删除

惰性删除：指某个键值过期后，此键值不会马上被删除，而是等到下次被使用的时候，才会被检查到过期，此时才能得到删除。

**惰性删除的缺点**：浪费内存。

# 3 定时删除

定时删除：指每隔一段时间执行一次删除操作，并通过限制删除操作执行的时长和频率，来减少删除操作对cpu的影响。另一方面定时删除也有效的减少了因惰性删除带来的内存浪费。