# 语义分析

**语义分析**是把分析得到句法成分与应用领域中的目标表示相关联。

句法分析后还不能理解所分析的句子，至少还需要进行语义分析。简单的做法是依次使用独立的句法分析程序和语义解释程序。但这样做使得句法分析和语义分析相分离，在很多情况下无法决定句子的结构。扩充转移网络ATN允许把语义分析加进句法分析，并充分支持语义解释。

# 1 语义文法

**语义文法**是将文法知识和语义知识组合起来，以统一的方式定义为文法规则集。

语义文法是**上下文无关的**，形态上与面向自然语言的常见文法相同，只是不采用NP、VP及PP等表示句法成分的非终止符，而是**使用能表示语义类型的符号，从而可以定义包含语义信息的文法规则**。

下面给出一个关于舰船信息的例子，可以看出语义文法在语义分析中的作用：
$$
\begin{array}{l}
S & \rightarrow PRESENT \quad the \quad ATTRIBUTE \quad of \quad SHIP \\
PRESENT & \rightarrow What \quad is|can \quad you \quad tell \quad me \\
ATTRIBUTE & \rightarrow length|class \\
SHIP & \rightarrow the SHIPNAME | CLASSNAME \quad class \quad ship \\
SHIPNAME & \rightarrow Huanghe|Changjiang \\
CLASSNAME & \rightarrow carrier | submarine
\end{array}
$$
说明：

- 用全是大写的英文字母表示的单词代表非终止符，用全是小写的英文字母表示的单词代表终止符。

语义文法不仅可以可以排除无意义的句子，而且具有 较高的效率，对语义没有影响的句法问题可以忽略。但是实际应用该文法时需要很多的文法规则，因此一般适用于严格受到限制的领域。

# 2 格文法

**格文法**是由Filimore提出的，主要是为了找出动词和跟动词处在结构关系中的名词的语义关系，同时也涉及动词或动词短语与其他各种名词短语之间的关系。也就是说，格文法的**特点**是允许以动词为中心构造分析结果，尽管文法规则只描述句法，但分析结果产生的结构却对应于语义关系，而非严格的句法关系。

例如：对于英文句子`Mary hit Bill.`的格文法分析结果可以表示为：

```
(hit(Agent Mary)
	(Dative Bill))
```

在格表示中，一个语句包含的名词词组和介词词组均以它们与句子中动词的关系来表示，称为**格**。上边的例子中的Agent和Dative都是格，而像“(Agent Mary)”这样的基本表示称为**格结构**。

在传统文法中，格仅表示一个词或短语在句子中的功能，如主格、宾格等，反映的也只是词尾的变化规则，故称为**表层格**。如果格表示语义方面的关系，反映句子中包含的思想、观念等，则称为**深层格**。和短语结构文法相比，格文法更好地描述句子的深层语义。

无论句子的表层形式如何变化，如主动语态便为被动语态、陈述句便为疑问句、肯定句变为否定句等，其底层的语义关系、各名词成分所代表的格关系不会发生相应的变化。

格文法和类型层次相结合，可以从语义上对ATN进行解释。类型层次描述了层次中父子之间的子集关系。根据层次中事件或项的特化（specialized）/泛化（generalized）关系，类型层次在构造有关动词及其宾语的知识，或者确定一个名词或动词的意义时非常有用。

在类型层次中，为了解释ATN的意义，动词具有关键的作用。因此可以使用格文法，通过动作实施的工具或手段描述动作主体（agent）的动作。例如，动词laugh可以通过动作主体的嘴唇来描述一个动作，可以带给子集或他人乐趣。因此，laugh可以表示为如下图的格框架。

![](./media/artificialIntelligence_naturalLanguageUnderstanding_20210119124101.png)

注：矩形表示世界的描述，两个矩形之间的关系用椭圆表示。

为了对ATN进行语义解释，需要指出下面的问题：

1. 当从ATN中的句子S开始分析时，需确定名词短语和动词短语以得到名词和动词的格框架表示。将名词和对应格框架中的主语（动作主体）关联在一起。
2. 当处理名词短语时，需要确定名词，确定冠词的数特征（单数还是复数），并将动作的制造者和名词相关联。
3. 当处理动词短语时，需要确定动词。如果动词是及物的，则找到其对应的名词短语，并说明它为动词的施加对象。
4. 当处理动词时，检索它的格框架。
5. 当处理名词时，检索它的格框架。

格文法是一种有效的语义分析方法，**有助于删除句法分析的歧义性**，并且易于使用。**格表示易于用语义网络表示法描述**，从而多个句子的格表示相互关联形成大的语义网络，以便开发句子间的关系，理解多句构成的上下文，并用于回答问题。