# 文法和语言

一个程序设计语言是一个记号系统，如同自然语言一样，它的完整定义应包括语法和语义两个方面。所谓一个语言的语法是指一组规则，用它可以形成和产生一个合适的程序。

语法只是定义什么样的符号序列是合法的，与这些符号的含义毫无关系。

程序设计语言的语义常常分为两类：

- 静态语义：是一系列限定规则，并确定哪些合乎语法的程序是合适的
- 动态语义：也称作运行语义或执行语义，表明程序要做些什么，要计算什么。

# 1 文法的直观概念

当我们表述一种语言时，无非是说明这种语言的句子，如果语言只包含有穷多个句子，则只需列出句子的又穷集就行了，但对于含有无穷多个句子的语言来讲，存在着如何给出它的又穷表示的问题。

以自然语言为例，人们无法列出全部句子，但是人们可以给出一些规则，用这些规则来说明（或者定义）句子的组成结构，如“我是大学生”是汉语的一个句子。使用EBNF表示如下：

```
<句子>::=<主语><谓语>
<主语>::=<代词>|<名词>
<代词>::=我|你|他
<名词>::=王明|大学生|工人|英语
<谓词>::=<动词><直接宾语>
<动词>::=是|学习
<直接宾语>::=<代词>|<名词>
```

“我是大学生”的构成符合上述规则，而“我大学生是”不符合上述规则，即它不是句子。这些规则成为判断句子结构合法与否的依据，换句话说，将这些规则看成一种元语言，用它描述汉语。这里仅仅涉及汉语句子的结构描述。这样的语言描述成为文法。

使用文法作为工具，不仅是为了严格地定义句子的结构，也是为了用适当条数的规则把语言的全部句子描述出来，可以说文法是以有穷的集合刻画无穷的集合的一个工具。

# 2 符号和符号串

## 2.1 字母表

字母表是元素的非空有穷集合，字母表中的元素称为符号，因此字母表也称为符号集。不同的语言可以有不同的字母表。例如汉语的字母表中包含汉字、数字及标点符号等。

## 2.2 符号串

由字母表中的符号组成的任何有穷序列称为符号串。例如001110是字母表Σ={0, 1}上的符号串。在符号串中，符号的顺序是很重要的。可以使用字母表示符号串，如x=STR表示“x是由符号S、T和R，并按此顺序组成的符号串”。

空符号串，是不包含任何符号的符号串，用ε表示，其长度为0，及|ε|=0。

**符号串的相关运算**：

- 符号串的头尾，固有头和固有尾：
  - 如果z=xy是一符号串，那么x是z的头，y是z的尾，如果x是非空的，那么y是固有尾；同样，如果y非空，那么x是固有头。
- 符号串的连接：
  - 设x和y是符号串，他们的连接xy是把y的符号写在x的符号之后得到的符号串。
- 符号串的方幂：
  - 设x是符号串，把x自身连接n词得到符号串z，即z=xxx...xxx，称为符号串x的方幂，写作$z = x^n$，即把符号串x相继地重复写n次。
- 符号串的集合：
  - 若集合A中的一切元素都是某字母表上的符号串，则称A为该字母表上的符号串集合。两个符号串集合A和B的乘积定义如下：AB={xy|x∈A 且 y∈B}，即AB是满足x属于A，y属于B的所有符号串xy所组成的集合。

指定字母表Σ之后，可用$Σ^*$表示Σ上的所有有穷长的串的集合。例如，如Σ={0, 1}，则$Σ^*=\{ε, 0,1, 00, 01, 10, 11, 000, 001, 010, ...\}$，也可表示为字母表的方幂形式：
$$
Σ^* = Σ^0 ∪ Σ^1 ∪ Σ^2 ... ∪ Σ^n ...
$$
$Σ^*$称为集合Σ的闭包。而$Σ^+ = Σ^1 ∪ Σ^2 ... Σ^n ...$称为Σ的正闭包。显然有
$$
Σ^* = Σ^0 ∪ Σ^+	\\
Σ^+ = ΣΣ^* = Σ^*Σ
$$
$Σ^*$具有可数的无穷数量的元素。

使用一般集合论的表示符号：若x是$Σ^*$中的元素，则表示为$x \in Σ^*$，否则$x \not\in Σ^*$。对于所有的$Σ$，有$\varepsilon \in Σ^*$ 。

# 3 文法和语言的形式定义

**规则**，也称重写规则、**产生式**或**生成式**，是形如$\alpha \rightarrow \beta$或$\alpha ::= \beta$的$(\alpha, \beta)$有序对，其中$\alpha$称为规则的左部，$\beta$称为规则的右部。这里使用的符号$\rightarrow(::=)$读作“定义为”。

文法G定义为四元组$(V_N, V_T, P, S)$。

- $V_N$：为非终结符（或语法实体，或变量）集，这些符号是专门用来描述文法的，不能出现在最终生成的句子中；
- $V_T$：为终结符集，终结符是指被定义的那个语言的词（或符号）；
- $P$：为规则（$\alpha \rightarrow \beta$）的集合，$\alpha \in (V_N \cup V_T)^*$ ，且至少包含一个非终结符，$\beta \in (V_N \cup V_T)^*$
- $S$：称作识别符或开始符，它是一个非终结符，至少要在一条规则中作为左部出现。

注：

- $V_N$、$V_T$、$P$是非空有穷集。
- $V_N$和$V_T$不含公共元素，即$V_N \cap V_T = \varnothing$
- 通常用V表示$V_N \cup V_T$，V称为文法G的**字母表**或字汇表。

很多时候，不用将文法G的四元组显式地表示出来，而只将产生式写出。一般约定，第一条产生式的左部是识别符；用尖括号括起来的是非终结符，不用尖括号括起来的是终结符，或者大写字母表示非终结符，小写字母表示终结符。另外，也有一种习惯写法，将G写成G[S]，其中S是识别符。

设$\alpha \rightarrow \beta$是文法$G = (V_N, V_T, P, S)$的规则（或说是P中的一个产生式），$\gamma$和$\delta$是$V^*$中任意符号，若有符号串v、w满足$\nu = \gamma\alpha\delta, \omega = \gamma\beta\delta$，则说$\nu$（应用规则$\alpha \rightarrow \beta$）直接产生$\omega$，或说$\omega$是$\nu$的直接推导，或说$\omega$直接归约到$\nu$记作$\nu \Rightarrow \omega$。

如果存在直接推导的序列：$\nu = \omega_0 \Rightarrow \omega_1  \Rightarrow \omega_2  \Rightarrow ... \Rightarrow \omega_n = \omega (n > 0)$，则称$\nu$推导出（产生）$\omega$（推导长度为n），或称w归约到v，记作$\nu \xRightarrow{+} \omega$